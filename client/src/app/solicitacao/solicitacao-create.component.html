<h1 class="title-solicitacao color-gray">solicitação de compra</h1>
<hcal-tab>
    <hcal-step>
        <h2 class="title-step color-gray">seleção de itens</h2>
        <section class="container-md scroll-container bg-gray">
            <perfect-scrollbar>
                <div class="col-12 list-item-container" [formGroup]="controlArray"
                     #stepItem>
                    <section class="col-12 solicitacao-group" id="item{{i}}"
                             *ngFor="let item of controlArray.get('items').controls; let i = index"
                             formArrayName="items">
                        <div class="group" [formGroupName]="i">
                            <div class="form-group col-7">
                                <label class="request-label color-gray" [attr.for]="'descricao'+i">Descrição</label>
                                <input type="text" [id]="'descricao'+i" (blur)="clearList($event.target)"
                                       (keydown)="find($event.target, 'items')"
                                       formControlName="descricao" name="descricao"
                                       class="col-12 request-input-line-bottom">
                            </div>
                            <div class="form-group col-2">
                                <label class="request-label color-gray" [attr.for]="'unidade_medida'+i">Unid.</label>
                                <input type="text" (focus)="find($event.target, 'items')" id="unidade_medida"
                                       name="unidade_medida" [id]="'unidade_medida'+i"
                                       class="col-12 request-input-line-bottom">
                            </div>
                            <div class="form-group col-2">
                                <label class="request-label color-gray" for="quantidade">Qtd.</label>
                                <input type="text" id="quantidade" name="quantidade"
                                       class="col-12 request-input-line-bottom">
                            </div>
                        </div>
                        <button class="button-cancel" name="button-cancel">X</button>
                    </section>
                    <button (click)="addField($event.target, 'items')" [name]="'add-button'"
                            class="float-button-plus bg-green color-white">+
                    </button>
                </div>
            </perfect-scrollbar>
        </section>
    </hcal-step>
    <hcal-step>
        <h2 class="title-step color-gray">seleção de fabricantes</h2>
        <section class="container-md scroll-container bg-gray">
            <perfect-scrollbar>
                <div class="col-12 list-item-container">
                    <section class="col-12 solicitacao-group" id="fabricante">
                        <div class="form-group col-8">
                            <label class="request-label color-gray" for="fantasia_fabricante">Fantasia</label>
                            <input type="text" id="fantasia_fabricante" name="fantasia_fabricante"
                                   class="col-12 request-input-line-bottom">
                        </div>
                        <div class="form-group col-3">
                            <label for="itens_fabricante" class="request-label color-gray">Item</label>
                            <select name="" id="itens_fabricante" class="request-input-line-bottom col-12">
                                <option value="">Escolha um item</option>
                                <option value="">Item 1</option>
                                <option value="">Item 2</option>
                                <option value="">Item 3</option>
                                <option value="">Item 4</option>
                                <option value="">Item 5</option>
                                <option value="">Item 6</option>
                                <option value="">Item 7</option>
                                <option value="">Item 8</option>
                                <option value="">Item 9</option>
                                <option value="">Item 10</option>
                            </select>
                        </div>
                        <button class="button-cancel" name="button-cancel-2">X</button>
                    </section>
                    <button (click)="addField($event.target, 'fabricantes')"
                            class="float-button-plus bg-green color-white">+
                    </button>
                </div>
            </perfect-scrollbar>
        </section>
    </hcal-step>
    <hcal-step>
        <h2 class="title-step color-gray">seleção de fornecedores</h2>
        <section class="container-md scroll-container bg-gray">
            <perfect-scrollbar>
                <div class="col-12 list-item-container">
                    <section class="col-12 items solicitacao-group" id="fornecedor">
                        <div class="form-group col-2">
                            <label class="request-label color-gray" for="fantasia_fornecedor">Fantasia</label>
                            <input type="text" id="fantasia_fornecedor" name="fantasia_fornecedor"
                                   class="col-12 request-input-line-bottom">
                        </div>
                        <div class="form-group col-2">
                            <label class="request-label color-gray" for="telefone">Telefone</label>
                            <input type="tel" id="telefone" name="telefone" class="col-12 request-input-line-bottom">
                        </div>
                        <div class="form-group col-2">
                            <label for="email" class="request-label color-gray">Email</label>
                            <input type="email" id="email" name="email" class="col-12 request-input-line-bottom">
                        </div>
                        <div class="form-group col-3">
                            <label for="itens_fornecedor" class="request-label color-gray">Item</label>
                            <select name="" id="itens_fornecedor" class="request-input-line-bottom col-12">
                                <option value="">Escolha um item</option>
                                <option value="">Item 1</option>
                                <option value="">Item 2</option>
                                <option value="">Item 3</option>
                                <option value="">Item 4</option>
                                <option value="">Item 5</option>
                                <option value="">Item 6</option>
                                <option value="">Item 7</option>
                                <option value="">Item 8</option>
                                <option value="">Item 9</option>
                                <option value="">Item 10</option>
                            </select>
                        </div>
                        <button class="button-cancel" name="button-cancel-3">X</button>
                    </section>
                    <button (click)="addField($event.target)" class="float-button-plus bg-green color-white">+</button>
                </div>
            </perfect-scrollbar>
        </section>
    </hcal-step>
    <hcal-step>
        <h2 class="title-step color-gray">resumo da compra</h2>
        <main class="container-request container-md scroll-container">
            <section class="main-content col-12">
                <header class="col-12 header-main-content">
                    <button (click)="setUrgency()" class="btn-urgency-container" #iconContainer>
                        <span>URGENTE</span>
                        <fa-icon id="iconContent" class="icon-watch" [icon]="['fas', 'stopwatch']"></fa-icon>
                    </button>
                    <h2 id="qnt" class="item-header">QUANTIDADE: {{items.length}}</h2>
                </header>
                <perfect-scrollbar class="scroll col-12">
                    <section class="col-12 container-items" *ngFor="let item of items; index as i">
                        <section class="labels">
                            <div class="label">Item</div>
                            <div class="label qnt-flex">Qnt</div>
                            <div class="label">Fabricante</div>
                            <div class="label">Fornecedor</div>
                        </section>

                        <section class="items">
                            <div class="item">{{i+1}} - {{item.descricao}}</div>
                            <div class="item qnt-flex">{{item.qnt}}</div>
                            <div class="item container-list">
                                <perfect-scrollbar>
                                    <div class="item" *ngFor="let fa of item.fabricante">{{ fa }}</div>
                                </perfect-scrollbar>
                            </div>
                            <div class="item container-list">
                                <perfect-scrollbar>
                                    <div class="item" *ngFor="let fo of item.fornecedor">{{ fo }}</div>
                                </perfect-scrollbar>
                            </div>
                        </section>
                    </section>
                </perfect-scrollbar>
            </section>
        </main>
    </hcal-step>
    <section class="container-md">
    <button class="button button-blue float-right" (click)="add($event.target)" next-button>Próximo ></button>
    <button class="button button-blue float-right" *ngIf="items != undefined && items.length > 0" finish-button>
        Finalizar
    </button>
    <button class="button button-reverse button-blue float-right" previous-button> < Anterior</button>
    <button class="button button-blue float-right" (click)="save()" finish-button>
        Solicitar
    </button>
    </section>
</hcal-tab>

<li *ngFor="let i of this.items">{{ i }}</li>